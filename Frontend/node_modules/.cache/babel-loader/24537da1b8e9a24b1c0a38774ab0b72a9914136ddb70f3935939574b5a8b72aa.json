{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shiro\\\\Desktop\\\\frontend\\\\src\\\\context\\\\cartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useAuth } from \"./authContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [cart, setCart] = useState([]);\n  const {\n    token\n  } = useAuth();\n  const [isCartUpdate, setIsCardUpdate] = useState(false);\n  const priceDetails = cart.reduce((acc, curr) => ({\n    quantity: acc.quantity + Number(curr.qty),\n    totalPrice: acc.totalPrice + Number(curr.price) * Number(curr.qty),\n    totalOriginalPrice: acc.totalOriginalPrice + Number(curr.qty) * Number(curr.originalPrice)\n  }), {\n    quantity: 0,\n    totalPrice: 0,\n    totalOriginalPrice: 0\n  });\n  const getCartData = async () => {\n    try {\n      setIsCardUpdate(true);\n      const {\n        data,\n        status\n      } = await axios({\n        method: \"GET\",\n        url: \"/api/user/cart\",\n        headers: {\n          authorization: token\n        }\n      });\n      if (status === 200) {\n        setCart(data === null || data === void 0 ? void 0 : data.cart);\n        setIsCardUpdate(false);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  const addCartData = async cartData => {\n    try {\n      setIsCardUpdate(true);\n      const {\n        data,\n        status\n      } = await axios({\n        method: \"POST\",\n        url: \"/api/user/cart\",\n        data: {\n          product: cartData\n        },\n        headers: {\n          authorization: token\n        }\n      });\n      if (status === 201) {\n        setCart(data === null || data === void 0 ? void 0 : data.cart);\n        setIsCardUpdate(false);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  const removeCartData = async dataId => {\n    setIsCardUpdate(true);\n    try {\n      const {\n        data,\n        status\n      } = await axios({\n        method: \"DELETE\",\n        url: `/api/user/cart/${dataId}`,\n        headers: {\n          authorization: token\n        }\n      });\n      if (status === 200) {\n        setCart(data === null || data === void 0 ? void 0 : data.cart);\n        setIsCardUpdate(false);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  const changeCartQuantity = async (dataId, updateType) => {\n    try {\n      setIsCardUpdate(true);\n      const {\n        data,\n        status\n      } = await axios({\n        method: \"POST\",\n        data: {\n          action: {\n            type: updateType\n          }\n        },\n        url: `/api/user/cart/${dataId}`,\n        headers: {\n          authorization: token\n        }\n      });\n      if (status === 200) {\n        setCart(data === null || data === void 0 ? void 0 : data.cart);\n        setIsCardUpdate(false);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  // console.log(token)\n\n  useEffect(() => {\n    if (token) {\n      getCartData();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [token]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n      value: {\n        cart,\n        setCart,\n        getCartData,\n        addCartData,\n        removeCartData,\n        changeCartQuantity,\n        priceDetails,\n        isCartUpdate\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(CartProvider, \"aw6OQD23flsFmpKgGWg7S3pzi4I=\", false, function () {\n  return [useAuth];\n});\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  return useContext(CartContext);\n};\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","axios","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","CartContext","CartProvider","_ref","_s","children","cart","setCart","token","isCartUpdate","setIsCardUpdate","priceDetails","reduce","acc","curr","quantity","Number","qty","totalPrice","price","totalOriginalPrice","originalPrice","getCartData","data","status","method","url","headers","authorization","e","console","log","addCartData","cartData","product","removeCartData","dataId","changeCartQuantity","updateType","action","type","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["C:/Users/Shiro/Desktop/frontend/src/context/cartContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useAuth } from \"./authContext\";\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n  const { token } = useAuth();\r\n  const [isCartUpdate, setIsCardUpdate] = useState(false);\r\n\r\n  const priceDetails = cart.reduce(\r\n    (acc, curr) => ({\r\n      quantity: acc.quantity + Number(curr.qty),\r\n      totalPrice: acc.totalPrice + Number(curr.price) * Number(curr.qty),\r\n      totalOriginalPrice:\r\n        acc.totalOriginalPrice + Number(curr.qty) * Number(curr.originalPrice),\r\n    }),\r\n    { quantity: 0, totalPrice: 0, totalOriginalPrice: 0 }\r\n  );\r\n\r\n  const getCartData = async () => {\r\n    try {\r\n      setIsCardUpdate(true);\r\n      const { data, status } = await axios({\r\n        method: \"GET\",\r\n        url: \"/api/user/cart\",\r\n        headers: { authorization: token },\r\n      });\r\n      if (status === 200) {\r\n        setCart(data?.cart);\r\n        setIsCardUpdate(false);\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  const addCartData = async (cartData) => {\r\n    try {\r\n      setIsCardUpdate(true);\r\n      const { data, status } = await axios({\r\n        method: \"POST\",\r\n        url: \"/api/user/cart\",\r\n        data: { product: cartData },\r\n        headers: { authorization: token },\r\n      });\r\n      if (status === 201) {\r\n        setCart(data?.cart);\r\n        setIsCardUpdate(false);\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  const removeCartData = async (dataId) => {\r\n    setIsCardUpdate(true);\r\n    try {\r\n      const { data, status } = await axios({\r\n        method: \"DELETE\",\r\n        url: `/api/user/cart/${dataId}`,\r\n        headers: { authorization: token },\r\n      });\r\n      if (status === 200) {\r\n        setCart(data?.cart);\r\n        setIsCardUpdate(false);\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  const changeCartQuantity = async (dataId, updateType) => {\r\n    try {\r\n      setIsCardUpdate(true);\r\n      const { data, status } = await axios({\r\n        method: \"POST\",\r\n        data: { action: { type: updateType } },\r\n        url: `/api/user/cart/${dataId}`,\r\n        headers: { authorization: token },\r\n      });\r\n      if (status === 200) {\r\n        setCart(data?.cart);\r\n        setIsCardUpdate(false);\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  // console.log(token)\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      getCartData();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [token]);\r\n\r\n  return (\r\n    <>\r\n      <CartContext.Provider\r\n        value={{\r\n          cart,\r\n          setCart,\r\n          getCartData,\r\n          addCartData,\r\n          removeCartData,\r\n          changeCartQuantity,\r\n          priceDetails,\r\n          isCartUpdate,\r\n        }}\r\n      >\r\n        {children}\r\n      </CartContext.Provider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const useCart = () => useContext(CartContext);\r\n"],"mappings":";;;AAAA,SAASA,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACtE,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAExC,MAAMC,WAAW,gBAAGV,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMW,YAAY,GAAGC,IAAA,IAAkB;EAAAC,EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC,GAAAF,IAAA;EACvC,MAAM,CAACG,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM;IAAEc;EAAM,CAAC,GAAGZ,OAAO,CAAC,CAAC;EAC3B,MAAM,CAACa,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAEvD,MAAMiB,YAAY,GAAGL,IAAI,CAACM,MAAM,CAC9B,CAACC,GAAG,EAAEC,IAAI,MAAM;IACdC,QAAQ,EAAEF,GAAG,CAACE,QAAQ,GAAGC,MAAM,CAACF,IAAI,CAACG,GAAG,CAAC;IACzCC,UAAU,EAAEL,GAAG,CAACK,UAAU,GAAGF,MAAM,CAACF,IAAI,CAACK,KAAK,CAAC,GAAGH,MAAM,CAACF,IAAI,CAACG,GAAG,CAAC;IAClEG,kBAAkB,EAChBP,GAAG,CAACO,kBAAkB,GAAGJ,MAAM,CAACF,IAAI,CAACG,GAAG,CAAC,GAAGD,MAAM,CAACF,IAAI,CAACO,aAAa;EACzE,CAAC,CAAC,EACF;IAAEN,QAAQ,EAAE,CAAC;IAAEG,UAAU,EAAE,CAAC;IAAEE,kBAAkB,EAAE;EAAE,CACtD,CAAC;EAED,MAAME,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAI;MACFZ,eAAe,CAAC,IAAI,CAAC;MACrB,MAAM;QAAEa,IAAI;QAAEC;MAAO,CAAC,GAAG,MAAM7B,KAAK,CAAC;QACnC8B,MAAM,EAAE,KAAK;QACbC,GAAG,EAAE,gBAAgB;QACrBC,OAAO,EAAE;UAAEC,aAAa,EAAEpB;QAAM;MAClC,CAAC,CAAC;MACF,IAAIgB,MAAM,KAAK,GAAG,EAAE;QAClBjB,OAAO,CAACgB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEjB,IAAI,CAAC;QACnBI,eAAe,CAAC,KAAK,CAAC;MACxB;IACF,CAAC,CAAC,OAAOmB,CAAC,EAAE;MACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;IAChB;EACF,CAAC;EAED,MAAMG,WAAW,GAAG,MAAOC,QAAQ,IAAK;IACtC,IAAI;MACFvB,eAAe,CAAC,IAAI,CAAC;MACrB,MAAM;QAAEa,IAAI;QAAEC;MAAO,CAAC,GAAG,MAAM7B,KAAK,CAAC;QACnC8B,MAAM,EAAE,MAAM;QACdC,GAAG,EAAE,gBAAgB;QACrBH,IAAI,EAAE;UAAEW,OAAO,EAAED;QAAS,CAAC;QAC3BN,OAAO,EAAE;UAAEC,aAAa,EAAEpB;QAAM;MAClC,CAAC,CAAC;MACF,IAAIgB,MAAM,KAAK,GAAG,EAAE;QAClBjB,OAAO,CAACgB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEjB,IAAI,CAAC;QACnBI,eAAe,CAAC,KAAK,CAAC;MACxB;IACF,CAAC,CAAC,OAAOmB,CAAC,EAAE;MACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;IAChB;EACF,CAAC;EAED,MAAMM,cAAc,GAAG,MAAOC,MAAM,IAAK;IACvC1B,eAAe,CAAC,IAAI,CAAC;IACrB,IAAI;MACF,MAAM;QAAEa,IAAI;QAAEC;MAAO,CAAC,GAAG,MAAM7B,KAAK,CAAC;QACnC8B,MAAM,EAAE,QAAQ;QAChBC,GAAG,EAAG,kBAAiBU,MAAO,EAAC;QAC/BT,OAAO,EAAE;UAAEC,aAAa,EAAEpB;QAAM;MAClC,CAAC,CAAC;MACF,IAAIgB,MAAM,KAAK,GAAG,EAAE;QAClBjB,OAAO,CAACgB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEjB,IAAI,CAAC;QACnBI,eAAe,CAAC,KAAK,CAAC;MACxB;IACF,CAAC,CAAC,OAAOmB,CAAC,EAAE;MACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;IAChB;EACF,CAAC;EAED,MAAMQ,kBAAkB,GAAG,MAAAA,CAAOD,MAAM,EAAEE,UAAU,KAAK;IACvD,IAAI;MACF5B,eAAe,CAAC,IAAI,CAAC;MACrB,MAAM;QAAEa,IAAI;QAAEC;MAAO,CAAC,GAAG,MAAM7B,KAAK,CAAC;QACnC8B,MAAM,EAAE,MAAM;QACdF,IAAI,EAAE;UAAEgB,MAAM,EAAE;YAAEC,IAAI,EAAEF;UAAW;QAAE,CAAC;QACtCZ,GAAG,EAAG,kBAAiBU,MAAO,EAAC;QAC/BT,OAAO,EAAE;UAAEC,aAAa,EAAEpB;QAAM;MAClC,CAAC,CAAC;MACF,IAAIgB,MAAM,KAAK,GAAG,EAAE;QAClBjB,OAAO,CAACgB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEjB,IAAI,CAAC;QACnBI,eAAe,CAAC,KAAK,CAAC;MACxB;IACF,CAAC,CAAC,OAAOmB,CAAC,EAAE;MACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;IAChB;EACF,CAAC;;EAED;;EAEApC,SAAS,CAAC,MAAM;IACd,IAAIe,KAAK,EAAE;MACTc,WAAW,CAAC,CAAC;IACf;IACA;EACF,CAAC,EAAE,CAACd,KAAK,CAAC,CAAC;EAEX,oBACEV,OAAA,CAAAE,SAAA;IAAAK,QAAA,eACEP,OAAA,CAACG,WAAW,CAACwC,QAAQ;MACnBC,KAAK,EAAE;QACLpC,IAAI;QACJC,OAAO;QACPe,WAAW;QACXU,WAAW;QACXG,cAAc;QACdE,kBAAkB;QAClB1B,YAAY;QACZF;MACF,CAAE;MAAAJ,QAAA,EAEDA;IAAQ;MAAAsC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACW;EAAC,gBACvB,CAAC;AAEP,CAAC;AAAC1C,EAAA,CAhHWF,YAAY;EAAA,QAELN,OAAO;AAAA;AAAAmD,EAAA,GAFd7C,YAAY;AAkHzB,OAAO,MAAM8C,OAAO,GAAGA,CAAA;EAAAC,GAAA;EAAA,OAAMzD,UAAU,CAACS,WAAW,CAAC;AAAA;AAACgD,GAAA,CAAxCD,OAAO;AAAA,IAAAD,EAAA;AAAAG,YAAA,CAAAH,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}