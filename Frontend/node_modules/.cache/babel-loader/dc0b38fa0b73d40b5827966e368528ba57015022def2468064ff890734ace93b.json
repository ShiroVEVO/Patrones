{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shiro\\\\Desktop\\\\frontend\\\\src\\\\context\\\\authContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useReducer, useState } from \"react\";\nimport { authReducer } from \"../reducer/authReducer\";\nimport axios from \"axios\";\nimport { useLocation, useNavigate } from \"react-router\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const localStorageItem = JSON.parse(localStorage.getItem(\"data\"));\n  const location = useLocation();\n  const authInitial = {\n    isAuthLoading: false,\n    user: {}\n  };\n  const [token, setToken] = useState((localStorageItem === null || localStorageItem === void 0 ? void 0 : localStorageItem.token) || \"\");\n  const [userCredentials, setUserCredentials] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\"\n  });\n  const [authState, authDispatch] = useReducer(authReducer, authInitial);\n  const navigate = useNavigate();\n  const userLogin = async loginData => {\n    // try {\n    //   authDispatch({ type: \"set_loading\", payload: true });\n    //   const { data, status } = await axios({\n    //     method: \"POST\",\n    //     data: loginData,\n    //     url: \"/api/auth/login\",\n    //   });\n    //   if (status === 200) {\n    //     authDispatch({ type: \"set_user\", payload: data?.foundUser });\n    //     setToken(data?.encodedToken);\n    //     authDispatch({ type: \"set_loading\", payload: false });\n    //     navigate(location?.state?.from?.pathname || \"/products\");\n    //     localStorage.setItem(\n    //       \"data\",\n    //       JSON.stringify({ user: data?.foundUser, token: data?.encodedToken })\n    //     );\n    //     toast.success(\"Logged In!\")\n    //   }\n    // } catch (e) {\n    //   console.log(e);\n    //   alert(e.response.data.errors);\n    // }\n  };\n  const userSignup = async signupData => {\n    try {\n      authDispatch({\n        type: \"set_loading\",\n        payload: true\n      });\n      const {\n        data,\n        status\n      } = await axios({\n        method: \"POST\",\n        data: signupData,\n        url: \"/api/auth/signup\"\n      });\n      if (status === 201) {\n        var _location$state, _location$state$from;\n        authDispatch({\n          type: \"set_user\",\n          payload: data === null || data === void 0 ? void 0 : data.createdUser\n        });\n        setToken(data === null || data === void 0 ? void 0 : data.encodedToken);\n        authDispatch({\n          type: \"set_loading\",\n          payload: false\n        });\n        navigate((location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || \"/products\");\n        localStorage.setItem(\"data\", JSON.stringify({\n          user: data === null || data === void 0 ? void 0 : data.createdUser,\n          token: data === null || data === void 0 ? void 0 : data.encodedToken\n        }));\n        toast.success(\"Logged In!\");\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  const userLogout = () => {\n    authDispatch({\n      type: \"set_user\",\n      payload: {}\n    });\n    setToken(\"\");\n    localStorage.removeItem(\"data\");\n  };\n  useEffect(() => {\n    if (localStorageItem) {\n      authDispatch({\n        type: \"set_user\",\n        payload: localStorageItem === null || localStorageItem === void 0 ? void 0 : localStorageItem.user\n      });\n      setToken(localStorageItem === null || localStorageItem === void 0 ? void 0 : localStorageItem.token);\n      authDispatch({\n        type: \"set_loading\",\n        payload: false\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n      value: {\n        authState,\n        userLogin,\n        userSignup,\n        userLogout,\n        userCredentials,\n        setUserCredentials,\n        token\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(AuthProvider, \"lECjrTOpToP4B/8EwKgxuu9CloM=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useReducer","useState","authReducer","axios","useLocation","useNavigate","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","AuthContext","AuthProvider","_ref","_s","children","localStorageItem","JSON","parse","localStorage","getItem","location","authInitial","isAuthLoading","user","token","setToken","userCredentials","setUserCredentials","firstName","lastName","email","password","confirmPassword","authState","authDispatch","navigate","userLogin","loginData","userSignup","signupData","type","payload","data","status","method","url","_location$state","_location$state$from","createdUser","encodedToken","state","from","pathname","setItem","stringify","success","e","console","log","userLogout","removeItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","$RefreshReg$"],"sources":["C:/Users/Shiro/Desktop/frontend/src/context/authContext.js"],"sourcesContent":["import {\r\n  createContext,\r\n  useContext,\r\n  useEffect,\r\n  useReducer,\r\n  useState,\r\n} from \"react\";\r\nimport { authReducer } from \"../reducer/authReducer\";\r\nimport axios from \"axios\";\r\nimport { useLocation, useNavigate } from \"react-router\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const localStorageItem = JSON.parse(localStorage.getItem(\"data\"));\r\n  const location = useLocation();\r\n  const authInitial = {\r\n    isAuthLoading: false,\r\n    user: {},\r\n  };\r\n\r\n  const [token, setToken] = useState(localStorageItem?.token || \"\");\r\n\r\n  const [userCredentials, setUserCredentials] = useState({\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n  });\r\n  const [authState, authDispatch] = useReducer(authReducer, authInitial);\r\n  const navigate = useNavigate();\r\n\r\n  const userLogin = async (loginData) => {\r\n    // try {\r\n    //   authDispatch({ type: \"set_loading\", payload: true });\r\n    //   const { data, status } = await axios({\r\n    //     method: \"POST\",\r\n    //     data: loginData,\r\n    //     url: \"/api/auth/login\",\r\n    //   });\r\n    //   if (status === 200) {\r\n    //     authDispatch({ type: \"set_user\", payload: data?.foundUser });\r\n    //     setToken(data?.encodedToken);\r\n    //     authDispatch({ type: \"set_loading\", payload: false });\r\n    //     navigate(location?.state?.from?.pathname || \"/products\");\r\n    //     localStorage.setItem(\r\n    //       \"data\",\r\n    //       JSON.stringify({ user: data?.foundUser, token: data?.encodedToken })\r\n    //     );\r\n    //     toast.success(\"Logged In!\")\r\n    //   }\r\n    // } catch (e) {\r\n    //   console.log(e);\r\n    //   alert(e.response.data.errors);\r\n    // }\r\n  };\r\n\r\n  const userSignup = async (signupData) => {\r\n    try {\r\n      authDispatch({ type: \"set_loading\", payload: true });\r\n      const { data, status } = await axios({\r\n        method: \"POST\",\r\n        data: signupData,\r\n        url: \"/api/auth/signup\",\r\n      });\r\n      if (status === 201) {\r\n        authDispatch({ type: \"set_user\", payload: data?.createdUser });\r\n        setToken(data?.encodedToken);\r\n        authDispatch({ type: \"set_loading\", payload: false });\r\n        navigate(location?.state?.from?.pathname || \"/products\");\r\n        localStorage.setItem(\r\n          \"data\",\r\n          JSON.stringify({ user: data?.createdUser, token: data?.encodedToken })\r\n        );\r\n        toast.success(\"Logged In!\")\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  const userLogout = () => {\r\n    authDispatch({ type: \"set_user\", payload: {} });\r\n    setToken(\"\");\r\n    localStorage.removeItem(\"data\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (localStorageItem) {\r\n      authDispatch({ type: \"set_user\", payload: localStorageItem?.user });\r\n      setToken(localStorageItem?.token);\r\n      authDispatch({ type: \"set_loading\", payload: false });\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <AuthContext.Provider\r\n        value={{\r\n          authState,\r\n          userLogin,\r\n          userSignup,\r\n          userLogout,\r\n          userCredentials,\r\n          setUserCredentials,\r\n          token,\r\n        }}\r\n      >\r\n        {children}\r\n      </AuthContext.Provider>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}